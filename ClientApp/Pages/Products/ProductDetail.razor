@page "/products/{ProductId:int}" 
@using ClientApp.Models
@using ClientApp.Services
@inject ProductService ProductService
@inject NavigationManager Navigation


<h3 class="text-2xl font-bold mb-4">Product Details</h3>

@if (product is null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="card p-4">
        <h4>@product.Name</h4>
        <p><strong>Price:</strong> R @product.Price</p>
        <p><strong>Stock:</strong> @product.Stock</p>
        <p><strong>Category:</strong> @product.Category</p>
        <p><strong>Supplier:</strong> @product.SupplierName</p>
        <p><strong>Supplier Location:</strong> @product.SupplierLocation</p>

        <button class="btn btn-secondary mt-3" @onclick="GoBack">Back to Products</button>
    </div>
}

@code{
    [Parameter]
    public int ProductId { get; set; } // This gets the product ID from the URL
    private ProductReadDto? product; // Holds the product details

    protected override async Task OnInitializedAsync()
    {
        product = await ProductService.GetByIdAsync(ProductId);

        // Incase no product isn't found, go back to products list page
        @* if(product is null)
        {
            Navigation.NavigateTo("/products");
        } *@
    }

    private void GoBack()
    {
        // Navigate back to the suppliers list page
        Navigation.NavigateTo("/products");
    }
}